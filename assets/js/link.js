!function(l){"use strict";function n(t,o){var n=this;n.$el=t,n.id=t.attr("data-id"),n.options=o,n.$container=n.$el.find(n.options.container),n.num=n.$container.find(n.options.items).length,n.$el.find(n.options.linkbutton).on("keyup",l.proxy(n.linketize,n)),n.$el.find(n.options.addbutton).on("click",l.proxy(n.add_block,n)),n.$el.find(n.options.delbutton).on("click",l.proxy(n.remove_block,n)),n.$el.find(n.options.delallbutton).on("click",l.proxy(n.remove_all,n))}n.prototype.$el=null,n.prototype.$container=null,n.prototype.id=null,n.prototype.options=null,n.prototype.num=0,n.prototype.linketize=function(t){t.preventDefault();var o=l(t.target||t.currentTarget);this.$el.find(this.options.gotobutton).attr("href",o.val())},n.prototype.add_block=function(t){t.preventDefault();var o=this;l(t.target||t.currentTarget);o.num++;var n=wp.template(o.options.source),e=l(n({id:o.num}));o.$container.append(e);var i=o.$container.find(o.options.items).last();i.find(o.options.linkbutton).on("keyup",l.proxy(o.linketize,o)),i.find(o.options.delbutton).on("click",l.proxy(o.remove_block,o))},n.prototype.remove_all=function(t){t.preventDefault();this.$el.find(this.options.delbutton).click()},n.prototype.remove_block=function(t){t.preventDefault();var o=l(t.target||t.currentTarget).closest(this.options.items);o.css("background",this.options.color),o.animate({opacity:"0"},"slow",function(){o.remove()})};var o={init:function(t){if(!this.length)return!1;var o={addbutton:".add-link",color:"#ffaaaa",container:"fieldset",delallbutton:".del-all-links",delbutton:".del-link",gotobutton:".goto",items:".link-container",linkbutton:".block-link input",source:"template-id"};return this.each(function(){t&&l.extend(o,t),new n(l(this),o)})},update:function(){},destroy:function(){}};l.fn.zeusLink=function(t){return o[t]?o[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?(l.error("Method "+t+" does not exist on zeusLink"),!1):o.init.apply(this,arguments)}}(window.jQuery);